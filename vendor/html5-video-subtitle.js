var subtitlePlayer=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r;!function(e){e[e.TEXT=0]="TEXT",e[e.LINE_BREAK=1]="LINE_BREAK"}(r||(r={}));var i;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.CENTER=2]="CENTER"}(i||(i={}));var o;!function(e){e[e.BOLD=0]="BOLD",e[e.NORMAL=1]="NORMAL"}(o||(o={}));var s;!function(e){e[e.UNDERLINE=0]="UNDERLINE",e[e.OVERLINE=1]="OVERLINE",e[e.LINE_THROUGH=2]="LINE_THROUGH"}(s||(s={}))},function(e,t,n){"use strict";function r(e,t){var n=new o.a;return new i.a(e,n,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=r;var i=n(3),o=n(15)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(4),i=(n.n(r),n(7)),o=n(8),s=n(9),a=n(13),u=n(14),c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},l={videoWrapperClass:"video-wrapper",renderingContainerClass:"rendering-container"},d=function(){function e(e,t,n){void 0===n&&(n=l),this.videoElement=e,this.playerOptions=n,this.renderer=t,this.eventRegistry=new o.a,this.cueTracks={},this.buildVideoWrapper()}return e.prototype.destroy=function(){this.eventRegistry.unregisterAll(),this.videoWrapperElement.parentNode.appendChild(this.videoElement),this.playerOptions.videoWrapperId||this.videoWrapperElement.remove(),this.renderingAreaElement.remove()},e.prototype.displayTextTrack=function(e){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.addCueTrack("default",e)];case 1:return t.sent(),this.displayCueTrack("default"),[2]}})})},e.prototype.addCueTrack=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o;return h(this,function(s){switch(s.label){case 0:return[4,fetch(t)];case 1:return n=s.sent(),[4,n.text()];case 2:return r=s.sent(),i=new a.a,o=i.parse(r),this.cueTracks[e]=o,[2]}})})},e.prototype.displayCueTrack=function(e){this.cueTrack=this.cueTracks[e],this.lastDisplayedCueIds=[],this.lastRefreshTime=0,this.cueFinder=new s.a,this.cueFinder.appendCueDictionary(this.cueTrack.cues),this.renderer.clear(this.renderingAreaElement),this.syncRendering()},e.prototype.hideCueTracks=function(){this.cueTrack=null,this.lastDisplayedCueIds=[],this.lastRefreshTime=0,this.cueFinder=null,this.renderer.clear(this.renderingAreaElement)},e.prototype.requestFullscreen=function(){this.videoWrapperElement.requestFullscreen()},e.prototype.buildVideoWrapper=function(){var e=this,t=null;null!=this.playerOptions.videoWrapperId&&(t=document.getElementById(this.playerOptions.videoWrapperId)),null===t&&(t=document.createElement("div"),this.videoElement.parentNode.insertBefore(t,this.videoElement),t.appendChild(this.videoElement)),t.className=this.playerOptions.videoWrapperClass;var n=document.createElement("div");n.className=this.playerOptions.renderingContainerClass,this.playerOptions.renderingContainerId?n.id=this.playerOptions.renderingContainerId:n.id=this.playerOptions.renderingContainerClass+"-"+Math.round(Math.random()*Math.pow(10,9)),t.insertBefore(n,this.videoElement);var r=function(n){var r=null!=document.fullscreenElement&&document.fullscreenElement===t;t.className=e.playerOptions.videoWrapperClass,r&&(t.className+=" full-screen")};this.eventRegistry.register(document,"fullscreenchange",r);var o=function(t){e.videoWidth=e.videoElement.videoWidth,e.videoHeight=e.videoElement.videoHeight};this.eventRegistry.register(this.videoElement,"loadedmetadata",o),new i.a(function(t,n){var r=0,i=0,o=e.videoElement.offsetWidth,s=e.videoElement.offsetHeight,a=e.videoWidth/e.videoHeight;e.videoElement.offsetHeight*a<e.videoElement.offsetWidth?(r=(e.videoElement.offsetWidth-e.videoElement.offsetHeight*a)/2,o=e.videoElement.offsetWidth-2*r):(i=(e.videoElement.offsetHeight-e.videoElement.offsetWidth/a)/2,s=e.videoElement.offsetHeight-2*i),e.renderingAreaElement.style.width=o+"px",e.renderingAreaElement.style.height=s+"px",e.renderingAreaElement.style.left=r+"px",e.renderingAreaElement.style.top=i+"px"}).observe(this.videoElement),Object(u.a)("\n.video-wrapper {\n    position: relative;\n    display: inline-block;\n}\n\n.video-wrapper.full-screen {\n    width: 100%;\n    height: 100%;\n}\n\n.video-wrapper.full-screen video {\n    width: 100%;\n    height: 100%;\n}\n\n.rendering-container {\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 2147483647;\n    pointer-events: none;\n    text-align: center;\n}\n\n.rendering-container .cue {\n    position: absolute;\n    display: block;\n    left: 0;\n    right: 0;\n    bottom: 10%;\n    align-self: flex-end;\n    text-align: center;\n    color: #ffffff;\n    font-size: 1.5em;\n    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\n}\n\n.video-wrapper.full-screen .cue {\n    font-size: 6vmin;\n}\n"),this.videoWrapperElement=t,this.renderingAreaElement=n},e.prototype.syncRendering=function(){var e=this;if(null!==this.cueTrack){var t=Math.abs(1e3*this.videoElement.currentTime);if(Math.abs(t-this.lastRefreshTime)>500){var n=this.cueFinder.findCues(t,t),i=n.map(function(e){return e.id});0===i.filter(function(t){return-1!==e.lastDisplayedCueIds.indexOf(t)}).length&&this.renderer.clear(this.renderingAreaElement);for(var o=0,s=n;o<s.length;o++){var a=s[o];if(-1===this.lastDisplayedCueIds.indexOf(a.id)){var u={items:a.items.map(function(t){return{type:t.type,data:t.data,style:e.cueTrack.styles[t.styleId]}}),region:this.cueTrack.regions[a.regionId],style:this.cueTrack.styles[a.styleId]};this.renderer.renderCue(this.renderingAreaElement,u)}}this.lastDisplayedCueIds=i,this.lastRefreshTime=t}r(function(){e.syncRendering()})}},e}()},function(e,t,n){(function(t){for(var r=n(5),i="undefined"==typeof window?t:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],u=i["cancel"+s]||i["cancelRequest"+s],c=0;!a&&c<o.length;c++)a=i[o[c]+"Request"+s],u=i[o[c]+"Cancel"+s]||i[o[c]+"CancelRequest"+s];if(!a||!u){var h=0,l=0,d=[];a=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-h));h=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(h)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++l,callback:e,cancelled:!1}),l},u=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return a.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=a,e.cancelAnimationFrame=u}}).call(t,n(0))},function(e,t,n){(function(t){(function(){var n,r,i,o,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-s)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n(),a=1e9*t.uptime(),s=o-a):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(t,n(6))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){v&&f&&(v=!1,f.length?p=f.concat(p):y=-1,p.length&&a())}function a(){if(!v){var e=i(s);v=!0;for(var t=p.length;t;){for(f=p,p=[];++y<t;)f&&f[y].run();y=-1,t=p.length}f=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var h,l,d=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],v=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){function n(e){return parseFloat(e)||0}function r(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return t.reduce(function(t,r){return t+n(e["border-"+r+"-width"])},0)}function i(e){for(var t=["top","right","bottom","left"],r={},i=0,o=t;i<o.length;i+=1){var s=o[i],a=e["padding-"+s];r[s]=n(a)}return r}function o(e){var t=e.getBBox();return h(0,0,t.width,t.height)}function s(e){var t=e.clientWidth,o=e.clientHeight;if(!t&&!o)return T;var s=w(e).getComputedStyle(e),u=i(s),c=u.left+u.right,l=u.top+u.bottom,d=n(s.width),f=n(s.height);if("border-box"===s.boxSizing&&(Math.round(d+c)!==t&&(d-=r(s,"left","right")+c),Math.round(f+l)!==o&&(f-=r(s,"top","bottom")+l)),!a(e)){var p=Math.round(d+c)-t,v=Math.round(f+l)-o;1!==Math.abs(p)&&(d-=p),1!==Math.abs(v)&&(f-=v)}return h(u.left,u.top,d,f)}function a(e){return e===w(e).document.documentElement}function u(e){return d?_(e)?o(e):s(e):T}function c(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return E(s,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),s}function h(e,t,n,r){return{x:e,y:t,width:n,height:r}}var l=function(){function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){var n=this;void 0===t&&(t=null);for(var r=0,i=n.__entries__;r<i.length;r+=1){var o=i[r];e.call(t,o[1],o[0])}},Object.defineProperties(t.prototype,n),t}()}(),d="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,f=function(){return void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),p=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(f):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),v=2,y=function(e,t){function n(){o&&(o=!1,e()),s&&i()}function r(){p(n)}function i(){var e=Date.now();if(o){if(e-a<v)return;s=!0}else o=!0,s=!1,setTimeout(r,t);a=e}var o=!1,s=!1,a=0;return i},m=["top","right","bottom","left","width","height","size","weight"],g="undefined"!=typeof MutationObserver,b=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=y(this.refresh.bind(this),20)};b.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},b.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},b.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},b.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},b.prototype.connect_=function(){d&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},b.prototype.disconnect_=function(){d&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},b.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),m.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},b.getInstance=function(){return this.instance_||(this.instance_=new b),this.instance_},b.instance_=null;var E=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n+=1){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},w=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||f},T=h(0,0,0,0),_=function(){return"undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof w(e).SVGGraphicsElement}:function(e){return e instanceof w(e).SVGElement&&"function"==typeof e.getBBox}}(),x=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=h(0,0,0,0),this.target=e};x.prototype.isActive=function(){var e=u(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var A=function(e,t){var n=c(t);E(this,{target:e,contentRect:n})},O=function(e,t,n){if(this.activeObservations_=[],this.observations_=new l,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n};O.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof w(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new x(e)),this.controller_.addObserver(this),this.controller_.refresh())}},O.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof w(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},O.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},O.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},O.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new A(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},O.prototype.clearActive=function(){this.activeObservations_.splice(0)},O.prototype.hasActive=function(){return this.activeObservations_.length>0};var N="undefined"!=typeof WeakMap?new WeakMap:new l,C=function(e){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=b.getInstance(),n=new O(e,t,this);N.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){C.prototype[e]=function(){return(t=N.get(this))[e].apply(t,arguments);var t}});var R=function(){return void 0!==f.ResizeObserver?f.ResizeObserver:C}();t.a=R}).call(t,n(0))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this.eventListeners=[]}return e.prototype.register=function(e,t,n){this.eventListeners.push({target:e,eventType:t,listener:n}),e.addEventListener(t,n)},e.prototype.unregister=function(e){this.eventListeners.forEach(function(t){t.eventType===e&&t.target.removeEventListener(t.eventType,t.listener)}),this.eventListeners.filter(function(t){return t.eventType!==e})},e.prototype.unregisterAll=function(){this.eventListeners.forEach(function(e){e.target.removeEventListener(e.eventType,e.listener)}),this.eventListeners=[]},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(10),i=function(){function e(){this.startToCue=new r.a,this.endToCue=new r.a}return e.prototype.appendCueDictionary=function(e){return this.appendCues(Object.keys(e).map(function(t){return e[t]}))},e.prototype.appendCues=function(e){this.cues=e;for(var t=0;t<e.length;t++)this.startToCue.put(e[t].startTime,t),this.endToCue.put(e[t].endTime,t);return[]},e.prototype.findCues=function(e,t){var n=this,r=new Set(this.startToCue.findInRange(0,e)),i=new Set(this.endToCue.findInRange(t,Math.pow(2,24))),o=new Set;r.forEach(function(e){i.has(e)&&o.add(e)});for(var s=0,a=this.endToCue.findInRange(e,t);s<a.length;s++){var u=a[s];o.add(u)}for(var c=0,h=this.startToCue.findInRange(e,t);c<h.length;c++){var u=h[c];o.add(u)}var l=[];return o.forEach(function(e){l.push(n.cues[e])}),l},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(11),i=n(12),o=function(){function e(e){void 0===e&&(e=4),this.order=e,this.height=0,this.size=0,this.root=new i.a}return e.prototype.isEmpty=function(){return 0===this.size},e.prototype.find=function(e){var t=this.findEntry(this.root,e,this.height);return null==t?null:t.values},e.prototype.findInRange=function(e,t){for(var n=this.findEntriesInRange(this.root,e,t,this.height),r=[],i=0,o=n;i<o.length;i++){var s=o[i];r.push.apply(r,s.values)}return r},e.prototype.put=function(e,t){var n=this.findEntry(this.root,e,this.height);if(null!=n)return void n.values.push(t);var o=this.insert(this.root,e,t,this.height);if(this.size++,null!=o){var s=new i.a;s.children.push(new r.a(this.root.children[0].key,null,this.root)),s.children.push(new r.a(o.children[0].key,null,o)),this.root=s,this.height++}},e.prototype.findEntriesInRange=function(e,t,n,r){var i=[];if(0===r)for(var o=0,s=e.children;o<s.length;o++){var a=s[o];a.key>=t&&a.key<=n&&i.push(a)}else for(var u=0;u<e.children.length;u++)(e.children.length===u+1||t<e.children[u+1].key)&&i.push.apply(i,this.findEntriesInRange(e.children[u].next,t,n,r-1));return i},e.prototype.findEntry=function(e,t,n){if(0===n)for(var r=0,i=e.children;r<i.length;r++){var o=i[r];if(t===o.key)return o}else for(var s=0;s<e.children.length;s++)if(e.children.length===s+1||t<e.children[s+1].key)return this.findEntry(e.children[s].next,t,n-1);return null},e.prototype.insert=function(e,t,n,i){var o=0,s=new r.a(t,[n],null);if(0===i)for(var a=0;a<e.children.length&&(o=a,!(t<e.children[a].key));a++);else for(var a=0;a<e.children.length;a++)if(e.children.length===a+1||t<e.children[a+1].key){o=a+1;var u=this.insert(e.children[a].next,t,n,i-1);if(null==u)return null;s.key=u.children[0].key,s.next=u;break}return e.children.splice(o+1,0,s),e.children.length<this.order?null:this.split(e)},e.prototype.split=function(e){var t=new i.a;return t.children=e.children.slice(this.order/2,this.order),e.children=e.children.slice(0,this.order/2),t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t,n){this.key=e,this.values=t,this.next=n}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this.children=[]}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=/^(\d{2,}):(\d{2}):(\d{2}):?(\d{2})?\.?(\d+)?$/,o=function(){function e(){this.domParser=new DOMParser}return e.prototype.parse=function(e){var t=this.domParser.parseFromString(e,"text/xml");if(!t)return void console.error("invalid TTML");var n=t.getElementsByTagName("tt");if(1!==n.length)return void console.error("invalid TTML");var r=n[0],i=(r.getAttribute("ttp:frameRate"),r.getAttribute("ttp:subFrameRate"),r.getAttribute("ttp:frameRateMultiplier"),r.getAttribute("ttp:tickRate"),r.getAttribute("xml:space"),this.parseRegions(r.getElementsByTagName("layout")[0])),o=this.parseStyles(r.getElementsByTagName("styling")[0]);return{cues:this.parseCues(r.getElementsByTagName("body")[0]),styles:o,regions:i}},e.prototype.parseRegions=function(e){var t={};if(!e)return t;if(!e.hasChildNodes())return t;for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n].nodeType===Node.ELEMENT_NODE){var i=e.childNodes[n];if("region"===i.nodeName){if(!i.hasAttribute("xml:id"))throw new Error("no xml:id defined on region");var o=i.getAttribute("xml:id"),s="0%",a="0%",u="100%",c="100%",h=void 0;if(i.hasAttribute("tts:origin")){var l=i.getAttribute("tts:origin");if("auto"!==l){var d=l.split(" ");if(2!==d.length)throw new Error("tts:origin is badly formated");s=d[0],a=d[1]}}if(i.hasAttribute("tts:extent")){var l=i.getAttribute("tts:extent");if("auto"!==l){var d=l.split(" ");if(2!==d.length)throw new Error("tts:extent is badly formated");u=d[0],c=d[1]}}if(i.hasAttribute("tts:textAlign")){var l=i.getAttribute("tts:textAlign");switch(l){case"left":h=r.b.LEFT;break;case"center":h=r.b.CENTER;break;case"right":h=r.b.RIGHT}}t[o]={x:s,y:a,width:u,height:c,textAlign:h}}}return t},e.prototype.parseStyles=function(e){var t={};if(!e)return t;if(!e.hasChildNodes())return t;for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n].nodeType===Node.ELEMENT_NODE){var r=e.childNodes[n];if("style"===r.nodeName){if(!r.hasAttribute("xml:id"))throw new Error("no xml:id defined on style");var i=r.getAttribute("xml:id"),o=void 0;r.hasAttribute("tts:color")&&(o=r.getAttribute("tts:color")),t[i]={color:o}}}return t},e.prototype.parseCues=function(e){var t={};if(!e)return t;if(!e.hasChildNodes())return t;for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n].nodeType===Node.ELEMENT_NODE){var r=e.childNodes[n];if(r.hasAttribute("begin")){var i=this.parseCue(r);t[i.id]=i}else{var o=this.parseCues(r);for(var s in o)t[s]=o[s]}}return t},e.prototype.parseCue=function(e){var t,n;return e.hasAttribute("region")&&(t=e.getAttribute("region")),e.hasAttribute("style")&&(n=e.getAttribute("style")),{id:e.getAttribute("xml:id"),startTime:this.parseTime(e.getAttribute("begin")),endTime:this.parseTime(e.getAttribute("end")),items:this.parseCueItems(e),regionId:t,styleId:n}},e.prototype.parseTime=function(e){var t=i.exec(e);if(!t)throw new Error("Unable to parse time: "+e);var n=1e3*(3600*Number(t[1])+60*Number(t[2])+Number(t[3]));return t[5]&&(n+=Number(t[5])),n},e.prototype.parseCueItems=function(e){var t=[];if(!e)return t;if(!e.hasChildNodes())return t;var n;e.hasAttribute("style")&&(n=e.getAttribute("style"));for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];e.childNodes[i];if("br"===o.nodeName)t.push({type:r.a.LINE_BREAK});else if(o.nodeType===Node.TEXT_NODE){var s=o.textContent.trim();s&&t.push({type:r.a.TEXT,data:s,styleId:n})}else o.nodeType===Node.ELEMENT_NODE&&t.push.apply(t,this.parseCueItems(o))}return t},e}()},function(e,t,n){"use strict";function r(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}t.a=r},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),i=function(){function e(){}return e.prototype.renderCue=function(e,t){var n=document.createElement("div");if(n.className="cue",void 0!==t.region){var i=Number(t.region.height.replace("%",""));if(n.style.bottom=100-i+"%",void 0!==t.region.textAlign){var o="inherit";switch(t.region.textAlign){case r.b.LEFT:o="left";break;case r.b.CENTER:o="center";break;case r.b.RIGHT:o="right"}n.style.textAlign=o}}this.applyStyle(n,t.style);for(var s=0,a=t.items;s<a.length;s++){var u=a[s],c=void 0;u.type===r.a.LINE_BREAK?c=document.createElement("br"):(c=document.createElement("span"),c.innerHTML=u.data,this.applyStyle(c,u.style)),n.appendChild(c)}e.appendChild(n)},e.prototype.clear=function(e){e.innerHTML=""},e.prototype.applyStyle=function(e,t){void 0!==t&&void 0!==t.color&&(e.style.color=t.color)},e}()}]);